@model InventoryUi.ViewModel.NewOrderVm

<!-- Display Customer Details -->
<div class="h-100">
    <div class="border px-3 rounded">
        <!-- Search Customer and Add Customer Button -->
        <!-- Company and Branch Details -->
        <div class="d-flex justify-content-between">
            <p class="mb-0">Name Of Company:</p>
            <p class="mb-0">Test Company</p>
        </div>
        <div class="d-flex justify-content-between">
            <p class="mb-0">Name Of Branch:</p>
            <p class="mb-0">Test Branch</p>
        </div>
        <hr style="border: 1px solid;" />

        <!-- Products List - Scrollable Area -->
        <div style="max-height: 100px; overflow-y: auto;">
            @if (Model.ProductsListFromSession != null && Model.ProductsListFromSession.Count > 0)
            {
                @foreach (var product in Model.ProductsListFromSession)
                {
                    <div class="d-flex justify-content-between">
                        <p class="mb-0 col-6">@product.ProductName</p> <!-- Column for Product Name -->
                        <p class="mb-0 col-2">@product.UnitPrice</p>   <!-- Column for Unit Price -->
                        <p class="mb-0 col-1">@product.Quentity</p>    <!-- Column for Quantity -->
                        <p class="mb-0 col-3">= @product.TotalPrice Tk</p> <!-- Column for Total Price -->
                    </div>

                }
            }
            else
            {
                <div class="d-flex justify-content-center">
                    <p class="mb-0 text-muted">No products available</p>
                </div>
            }
        </div>
        <hr style="border: 1px solid;" />

        <!-- Pricing and Customer Information -->
        <div class="d-flex justify-content-between">
            <p class="mb-0">Total:</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.productDiscountedTotal Tk</p>
        </div>
        <div class="d-flex justify-content-between">
            <p class="mb-0">Discount:</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.DiscountedAmount Tk</p>
        </div>
        <hr style="border: 1px solid;" />

        <div class="d-flex justify-content-between">
            <p class="mb-0">Sub total</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.SubTotal Tk</p>
        </div>
        <div class="d-flex justify-content-between">
            <p class="mb-0">Vat</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.vat Tk</p>
        </div>
        <hr style="border: 1px solid;" />

        <div class="d-flex justify-content-between">
            <p class="mb-0">Payment Total</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.PaymentAmount Tk</p>
        </div>
        <div class="d-flex justify-content-between">
            <p class="mb-0">Amount Due</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.DueAmount Tk</p>
        </div>
        <hr style="border: 1px solid;" />
        <div class="d-flex justify-content-between">
            <p class="mb-0">Total Payment Amount</p>
            <p class="mb-0">@Model?.CustomerLIstFromSession?.FynalyPaymentAmount Tk</p>
        </div>

        <!-- Customer Details -->
        @if (Model?.CustomerLIstFromSession?.CustomerName != null)
        {
            <hr style="border: 1px solid;" />
            <div class="d-flex justify-content-between">
                <p class="mb-0">Customer Name:</p>
                <p class="mb-0">@Model?.CustomerLIstFromSession?.CustomerName</p>
            </div>
            <div class="d-flex justify-content-between">
                <p class="mb-0">Customer Phone:</p>
                <p class="mb-0">@Model?.CustomerLIstFromSession?.Phone</p>
            </div>
            
            
        }
        <!-- Search Customer Partial View -->
        <div class="row mt-2 mb-2">
            @await Html.PartialAsync("_SearchCustomerPartial")
        </div>

       

        <!-- Action Buttons -->
        <div class="d-flex mt-5 mb-auto justify-content-between">
            <!-- Payment Button with JavaScript Function Call -->
            <button type="button" class="btn btn-success" id="paymentButton" onclick="processPayment()" @(Model.IsPaymentButtonEnabled ? "" : "disabled")>Payment</button>
            <button type="button" onclick="window.location.href='@Url.Action("Cancel", "NewOrder")'" class="btn btn-danger">Cancel</button>
        </div>

    </div>
</div>



@section Scripts {
    <script type="module" src="~/js/powerofsales/neworder.js"></script>
}